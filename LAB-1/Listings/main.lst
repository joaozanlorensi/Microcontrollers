


ARM Macro Assembler    Page 1 


    1 00000000         ; main.s
    2 00000000         ; Desenvolvido para a placa EK-TM4C1294XL
    3 00000000         ; Prof. Guilherme Peron
    4 00000000         ; Rev1: 10/03/2018
    5 00000000         ; Rev2: 10/04/2019
    6 00000000         ; Este programa espera o usuário apertar a chave USR_SW1
                        e/ou a chave USR_SW2.
    7 00000000         ; Caso o usuário pressione a chave USR_SW1, acenderá o L
                       ED3 (PF4). Caso o usuário pressione 
    8 00000000         ; a chave USR_SW2, acenderá o LED4 (PF0). Caso as duas c
                       haves sejam pressionadas, os dois 
    9 00000000         ; LEDs acendem.
   10 00000000         
   11 00000000         ; ------------------------------------------------------
                       -------------------------
   12 00000000                 THUMB                        ; Instruções do tip
                                                            o Thumb-2
   13 00000000         ; ------------------------------------------------------
                       -------------------------
   14 00000000         ; Declarações EQU - Defines
   15 00000000         ;<NOME>         EQU <VALOR>
   16 00000000         ; ========================
   17 00000000 10000000 
                       PASSO0  EQU              0x10000000
   18 00000000 01000000 
                       PASSO1  EQU              0x01000000
   19 00000000 00100000 
                       PASSO2  EQU              0x00100000
   20 00000000 00010000 
                       PASSO3  EQU              0x00010000
   21 00000000 00001000 
                       PASSO4  EQU              0x00001000
   22 00000000 00000100 
                       PASSO5  EQU              0x00000100
   23 00000000 01000010 
                       PASSO6  EQU              0x01000010
   24 00000000 01000001 
                       PASSO7  EQU              0x01000001
   25 00000000         ; ------------------------------------------------------
                       -------------------------
   26 00000000         ; Área de Dados - Declarações de variáveis
   27 00000000                 AREA             DATA, ALIGN=2
   28 00000000         ; Se alguma variável for chamada em outro arquivo
   29 00000000         ;EXPORT  <var> [DATA,SIZE=<tam>]   ; Permite chamar a va
                       riável <var> a 
   30 00000000         ; partir de outro arquivo
   31 00000000         ;<var> SPACE <tam>                        ; Declara uma 
                       variável de nome <var>
   32 00000000         ; de <tam> bytes a partir da primeira 
   33 00000000         ; posição da RAM  
   34 00000000         
   35 00000000         ; ------------------------------------------------------
                       -------------------------
   36 00000000         ; Área de Código - Tudo abaixo da diretiva a seguir será
                        armazenado na memória de 
   37 00000000         ;                  código
   38 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   39 00000000         



ARM Macro Assembler    Page 2 


   40 00000000         ; Se alguma função do arquivo for chamada em outro arqui
                       vo 
   41 00000000                 EXPORT           Start       ; Permite chamar a 
                                                            função Start a part
                                                            ir de 
   42 00000000         ; outro arquivo. No caso startup.s
   43 00000000         
   44 00000000         ; Se chamar alguma função externa 
   45 00000000         ;IMPORT <func>              ; Permite chamar dentro dest
                       e arquivo uma 
   46 00000000         ; função <func>
   47 00000000                 IMPORT           GPIO_Init
   48 00000000                 IMPORT           Liga_LED
   49 00000000                 IMPORT           Desliga_LED
   50 00000000                 IMPORT           Liga_7segDireita
   51 00000000                 IMPORT           Desliga_7segDireita
   52 00000000                 IMPORT           Liga_7segEsquerda
   53 00000000                 IMPORT           Desliga_7segEsquerda
   54 00000000                 IMPORT           LED_Or_7seg_Output
   55 00000000                 IMPORT           Decode7seg
   56 00000000                 IMPORT           DecodePassoCavaleiro
   57 00000000                 IMPORT           LeBotoes
   58 00000000                 IMPORT           SysTick_Wait1ms
   59 00000000                 IMPORT           SysTick_Init
   60 00000000                 IMPORT           PLL_Init
   61 00000000         
   62 00000000         ; ------------------------------------------------------
                       -------------------------
   63 00000000         ; Função main()
   64 00000000         Start
   65 00000000 F7FF FFFE       BL               GPIO_Init   ;Chama a subrotina 
                                                            que inicializa os G
                                                            PIO
   66 00000004 F7FF FFFE       BL               PLL_Init    ;80MHz
   67 00000008 F7FF FFFE       BL               SysTick_Init ;Inicia SysTick
   68 0000000C         
   69 0000000C F04F 0800       MOV              R8,  #0     ; Passo do cavaleir
                                                            o
   70 00000010 F04F 0901       MOV              R9,  #1     ; Incremento
   71 00000014 F04F 0A00       MOV              R10, #0     ; Dígito 0
   72 00000018 F04F 0B00       MOV              R11, #0     ; Dígito 1
   73 0000001C         
   74 0000001C         MainLoop
   75 0000001C F04F 0700       MOV              R7,  #0     ; Divisor de clock;
                                                            
   76 00000020         MostraDigitos
   77 00000020 F000 F861       BL               MostraDigito0
   78 00000024 F04F 0005       MOV              R0, #5
   79 00000028 F7FF FFFE       BL               SysTick_Wait1ms
   80 0000002C         
   81 0000002C F000 F86B       BL               MostraDigito1
   82 00000030 F04F 0005       MOV              R0, #5
   83 00000034 F7FF FFFE       BL               SysTick_Wait1ms
   84 00000038         
   85 00000038 F000 F845       BL               MostraPassoCavaleiro
   86 0000003C F04F 0005       MOV              R0, #5
   87 00000040 F7FF FFFE       BL               SysTick_Wait1ms
   88 00000044         
   89 00000044 F107 0701       ADD              R7, R7, #1



ARM Macro Assembler    Page 3 


   90 00000048 2F21            CMP              R7, #33
   91 0000004A D1E9            BNE              MostraDigitos
   92 0000004C         
   93 0000004C F000 F818       BL               Conta
   94 00000050 F7FF FFFE       BL               LeBotoes
   95 00000054         Verifica_SW1
   96 00000054 2802            CMP              R0, #2_00000010
   97 00000056 D102            BNE              Verifica_SW2
   98 00000058 F000 F806       BL               IncrementaPasso
   99 0000005C E7DE            B                MainLoop
  100 0000005E         Verifica_SW2
  101 0000005E 2801            CMP              R0, #2_00000001
  102 00000060 D1DC            BNE              MainLoop
  103 00000062 F000 F807       BL               DecrementaPasso
  104 00000066 E7D9            B                MainLoop
  105 00000068         
  106 00000068         
  107 00000068         IncrementaPasso
  108 00000068 F1B9 0F09       CMP              R9, #9
  109 0000006C D0D6            BEQ              MainLoop
  110 0000006E F109 0901       ADD              R9, R9, #1
  111 00000072 4770            BX               LR
  112 00000074         
  113 00000074         DecrementaPasso
  114 00000074 F1B9 0F01       CMP              R9, #1
  115 00000078 D0D0            BEQ              MainLoop
  116 0000007A F1A9 0901       SUB              R9, R9, #1
  117 0000007E 4770            BX               LR
  118 00000080         
  119 00000080         Conta
  120 00000080 B502            PUSH             {R1,LR}
  121 00000082         
  122 00000082 F1B8 0F07       CMP              R8, #7
  123 00000086 D10D            BNE              SomaPassoCavaleiro
  124 00000088 F04F 0800       MOV              R8, #0
  125 0000008C         
  126 0000008C         VoltaCavaleiro
  127 0000008C EB0A 0109       ADD              R1, R10, R9
  128 00000090 290A            CMP              R1, #10
  129 00000092 DB0A            BLT              SomaPasso
  130 00000094 F1A1 010A       SUB              R1, R1, #10
  131 00000098 468A            MOV              R10, R1
  132 0000009A F000 F808       BL               IncrementaDezena
  133 0000009E         Volta
  134 0000009E E8BD 4002       POP              {R1,LR}
  135 000000A2 4770            BX               LR
  136 000000A4         
  137 000000A4         SomaPassoCavaleiro
  138 000000A4 F108 0801       ADD              R8, R8, #1  ; Passo do cavaleir
                                                            o
  139 000000A8 E7F0            B                VoltaCavaleiro
  140 000000AA         
  141 000000AA         SomaPasso
  142 000000AA 44CA            ADD              R10, R10, R9
  143 000000AC E7F7            B                Volta
  144 000000AE         
  145 000000AE         IncrementaDezena
  146 000000AE B500            PUSH             {LR}
  147 000000B0 F1BB 0F09       CMP              R11, #9



ARM Macro Assembler    Page 4 


  148 000000B4 D004            BEQ              ZeraDezena
  149 000000B6 F10B 0B01       ADD              R11, R11, #1
  150 000000BA         Volta2
  151 000000BA F85D EB04       POP              {LR}
  152 000000BE 4770            BX               LR
  153 000000C0         
  154 000000C0         ZeraDezena
  155 000000C0 F04F 0B00       MOV              R11, #0
  156 000000C4 E7F9            B                Volta2
  157 000000C6         
  158 000000C6         ; Inputs: R12
  159 000000C6         MostraPassoCavaleiro
  160 000000C6 B503            PUSH             {R0,R1,LR}
  161 000000C8 F7FF FFFE       BL               Desliga_7segDireita
  162 000000CC F7FF FFFE       BL               Desliga_7segEsquerda
  163 000000D0 4640            MOV              R0, R8
  164 000000D2 F7FF FFFE       BL               DecodePassoCavaleiro ; R1 <= Có
                                                            digo do dígito
  165 000000D6 4608            MOV              R0, R1
  166 000000D8 F7FF FFFE       BL               LED_Or_7seg_Output
  167 000000DC F7FF FFFE       BL               Liga_LED
  168 000000E0 E8BD 4003       POP              {R0,R1,LR}
  169 000000E4 4770            BX               LR
  170 000000E6         
  171 000000E6         ; Inputs: R12
  172 000000E6         MostraDigito0
  173 000000E6 B503            PUSH             {R0,R1,LR}
  174 000000E8 F7FF FFFE       BL               Desliga_LED
  175 000000EC F7FF FFFE       BL               Desliga_7segEsquerda
  176 000000F0 4650            MOV              R0, R10
  177 000000F2 F7FF FFFE       BL               Decode7seg  ; R1 <= Código do d
                                                            ígito
  178 000000F6 4608            MOV              R0, R1
  179 000000F8 F7FF FFFE       BL               LED_Or_7seg_Output
  180 000000FC F7FF FFFE       BL               Liga_7segDireita
  181 00000100 E8BD 4003       POP              {R0,R1,LR}
  182 00000104 4770            BX               LR
  183 00000106         
  184 00000106         ; Inputs: R13
  185 00000106         MostraDigito1
  186 00000106 B503            PUSH             {R0,R1,LR}
  187 00000108 F7FF FFFE       BL               Desliga_LED
  188 0000010C F7FF FFFE       BL               Desliga_7segDireita
  189 00000110 4658            MOV              R0, R11
  190 00000112 F7FF FFFE       BL               Decode7seg  ; R1 <= Código do d
                                                            ígito
  191 00000116 4608            MOV              R0, R1
  192 00000118 F7FF FFFE       BL               LED_Or_7seg_Output
  193 0000011C F7FF FFFE       BL               Liga_7segEsquerda
  194 00000120         
  195 00000120 E8BD 4003       POP              {R0,R1,LR}
  196 00000124 4770            BX               LR
  197 00000126         
  198 00000126         
  199 00000126         
  200 00000126 00 00           ALIGN
  201 00000128                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\main.d -o.\objects\main.o -I.\RTE\_Target_1 -IC:\User



ARM Macro Assembler    Page 5 


s\joaoz\AppData\Local\Arm\Packs\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C129 -IC:
\Keil_v5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_V
ERSION SETA 528" --predefine="TM4C1294NCPDT SETA 1" --list=.\listings\main.lst 
main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

DATA 00000000

Symbol: DATA
   Definitions
      At line 27 in file main.s
   Uses
      None
Comment: DATA unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 38 in file main.s
   Uses
      None
Comment: .text unused
Conta 00000080

Symbol: Conta
   Definitions
      At line 119 in file main.s
   Uses
      At line 93 in file main.s
Comment: Conta used once
DecrementaPasso 00000074

Symbol: DecrementaPasso
   Definitions
      At line 113 in file main.s
   Uses
      At line 103 in file main.s
Comment: DecrementaPasso used once
IncrementaDezena 000000AE

Symbol: IncrementaDezena
   Definitions
      At line 145 in file main.s
   Uses
      At line 132 in file main.s
Comment: IncrementaDezena used once
IncrementaPasso 00000068

Symbol: IncrementaPasso
   Definitions
      At line 107 in file main.s
   Uses
      At line 98 in file main.s
Comment: IncrementaPasso used once
MainLoop 0000001C

Symbol: MainLoop
   Definitions
      At line 74 in file main.s
   Uses
      At line 99 in file main.s
      At line 102 in file main.s
      At line 104 in file main.s
      At line 109 in file main.s
      At line 115 in file main.s

MostraDigito0 000000E6

Symbol: MostraDigito0
   Definitions
      At line 172 in file main.s
   Uses
      At line 77 in file main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Comment: MostraDigito0 used once
MostraDigito1 00000106

Symbol: MostraDigito1
   Definitions
      At line 185 in file main.s
   Uses
      At line 81 in file main.s
Comment: MostraDigito1 used once
MostraDigitos 00000020

Symbol: MostraDigitos
   Definitions
      At line 76 in file main.s
   Uses
      At line 91 in file main.s
Comment: MostraDigitos used once
MostraPassoCavaleiro 000000C6

Symbol: MostraPassoCavaleiro
   Definitions
      At line 159 in file main.s
   Uses
      At line 85 in file main.s
Comment: MostraPassoCavaleiro used once
SomaPasso 000000AA

Symbol: SomaPasso
   Definitions
      At line 141 in file main.s
   Uses
      At line 129 in file main.s
Comment: SomaPasso used once
SomaPassoCavaleiro 000000A4

Symbol: SomaPassoCavaleiro
   Definitions
      At line 137 in file main.s
   Uses
      At line 123 in file main.s
Comment: SomaPassoCavaleiro used once
Start 00000000

Symbol: Start
   Definitions
      At line 64 in file main.s
   Uses
      At line 41 in file main.s
Comment: Start used once
Verifica_SW1 00000054

Symbol: Verifica_SW1
   Definitions
      At line 95 in file main.s
   Uses
      None
Comment: Verifica_SW1 unused
Verifica_SW2 0000005E




ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

Symbol: Verifica_SW2
   Definitions
      At line 100 in file main.s
   Uses
      At line 97 in file main.s
Comment: Verifica_SW2 used once
Volta 0000009E

Symbol: Volta
   Definitions
      At line 133 in file main.s
   Uses
      At line 143 in file main.s
Comment: Volta used once
Volta2 000000BA

Symbol: Volta2
   Definitions
      At line 150 in file main.s
   Uses
      At line 156 in file main.s
Comment: Volta2 used once
VoltaCavaleiro 0000008C

Symbol: VoltaCavaleiro
   Definitions
      At line 126 in file main.s
   Uses
      At line 139 in file main.s
Comment: VoltaCavaleiro used once
ZeraDezena 000000C0

Symbol: ZeraDezena
   Definitions
      At line 154 in file main.s
   Uses
      At line 148 in file main.s
Comment: ZeraDezena used once
19 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

PASSO0 10000000

Symbol: PASSO0
   Definitions
      At line 17 in file main.s
   Uses
      None
Comment: PASSO0 unused
PASSO1 01000000

Symbol: PASSO1
   Definitions
      At line 18 in file main.s
   Uses
      None
Comment: PASSO1 unused
PASSO2 00100000

Symbol: PASSO2
   Definitions
      At line 19 in file main.s
   Uses
      None
Comment: PASSO2 unused
PASSO3 00010000

Symbol: PASSO3
   Definitions
      At line 20 in file main.s
   Uses
      None
Comment: PASSO3 unused
PASSO4 00001000

Symbol: PASSO4
   Definitions
      At line 21 in file main.s
   Uses
      None
Comment: PASSO4 unused
PASSO5 00000100

Symbol: PASSO5
   Definitions
      At line 22 in file main.s
   Uses
      None
Comment: PASSO5 unused
PASSO6 01000010

Symbol: PASSO6
   Definitions
      At line 23 in file main.s
   Uses
      None
Comment: PASSO6 unused
PASSO7 01000001

Symbol: PASSO7



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 24 in file main.s
   Uses
      None
Comment: PASSO7 unused
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

Decode7seg 00000000

Symbol: Decode7seg
   Definitions
      At line 55 in file main.s
   Uses
      At line 177 in file main.s
      At line 190 in file main.s

DecodePassoCavaleiro 00000000

Symbol: DecodePassoCavaleiro
   Definitions
      At line 56 in file main.s
   Uses
      At line 164 in file main.s
Comment: DecodePassoCavaleiro used once
Desliga_7segDireita 00000000

Symbol: Desliga_7segDireita
   Definitions
      At line 51 in file main.s
   Uses
      At line 161 in file main.s
      At line 188 in file main.s

Desliga_7segEsquerda 00000000

Symbol: Desliga_7segEsquerda
   Definitions
      At line 53 in file main.s
   Uses
      At line 162 in file main.s
      At line 175 in file main.s

Desliga_LED 00000000

Symbol: Desliga_LED
   Definitions
      At line 49 in file main.s
   Uses
      At line 174 in file main.s
      At line 187 in file main.s

GPIO_Init 00000000

Symbol: GPIO_Init
   Definitions
      At line 47 in file main.s
   Uses
      At line 65 in file main.s
Comment: GPIO_Init used once
LED_Or_7seg_Output 00000000

Symbol: LED_Or_7seg_Output
   Definitions
      At line 54 in file main.s
   Uses
      At line 166 in file main.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
External symbols

      At line 179 in file main.s
      At line 192 in file main.s

LeBotoes 00000000

Symbol: LeBotoes
   Definitions
      At line 57 in file main.s
   Uses
      At line 94 in file main.s
Comment: LeBotoes used once
Liga_7segDireita 00000000

Symbol: Liga_7segDireita
   Definitions
      At line 50 in file main.s
   Uses
      At line 180 in file main.s
Comment: Liga_7segDireita used once
Liga_7segEsquerda 00000000

Symbol: Liga_7segEsquerda
   Definitions
      At line 52 in file main.s
   Uses
      At line 193 in file main.s
Comment: Liga_7segEsquerda used once
Liga_LED 00000000

Symbol: Liga_LED
   Definitions
      At line 48 in file main.s
   Uses
      At line 167 in file main.s
Comment: Liga_LED used once
PLL_Init 00000000

Symbol: PLL_Init
   Definitions
      At line 60 in file main.s
   Uses
      At line 66 in file main.s
Comment: PLL_Init used once
SysTick_Init 00000000

Symbol: SysTick_Init
   Definitions
      At line 59 in file main.s
   Uses
      At line 67 in file main.s
Comment: SysTick_Init used once
SysTick_Wait1ms 00000000

Symbol: SysTick_Wait1ms
   Definitions
      At line 58 in file main.s
   Uses
      At line 79 in file main.s
      At line 83 in file main.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
External symbols

      At line 87 in file main.s

14 symbols
376 symbols in table
